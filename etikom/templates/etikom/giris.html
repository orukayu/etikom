{% extends 'etikom/base.html' %}

{% block copy %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block baslik %}
<dl class="row align-items-center mb-0">
    <dt class="col-sm-3"><h4>{{ firma_adi|title }} Genel Raporlar</h4></dt>
    <dd class="col-sm-9">
        Firmanıza ait bu özel raporlar ile e-ticaretinizi kontrol etmek hiç bu kadar kolay olmamıştı.
    </dd>
</dl>
{% endblock %}


{% block content %}
<div class="mt-3">
    <div class="row">
        <p>Dönem Sayısı :<span>{{ tdns }} Ay</span></p>
        <p>Toplam Siparis Tutari :<span>{{ tsistt|floatformat:"2g" }}</span></p>
        <p>Toptan Satis Tutari :<span>{{ tststt|floatformat:"2g" }}</span></p>
        <p>Toplam Satis Tutari :<span>{{ ts|floatformat:"2g" }}</span></p>

        <h4>Haftalık Satışlar</h4>
        <canvas id="salesChart" width="400" height="200"></canvas>
        <script>
            const ctx = document.getElementById('salesChart').getContext('2d');
            const salesData = {
                labels: JSON.parse('{{ weeks|escapejs }}'),
                datasets: [{
                    label: 'Total Sales',
                    data: JSON.parse('{{ totals|escapejs }}'),
                    lineTension: 0,
                    backgroundColor: 'transparent',
                    borderColor: '#007bff',
                    borderWidth: 4,
                    pointBackgroundColor: '#007bff',
                }]
            };
            const salesChart = new Chart(ctx, {
                type: 'line',
                data: salesData,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        </script>



    </div>

</div>
{% endblock %}